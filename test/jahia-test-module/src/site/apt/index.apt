Jahia Test Package

* JUnit test

 Jahia can execute JUnit test inside tomcat's context. Tests need to be deployed into Jahia, and can be executed
 through maven.

 First you need to modify your settings.xml file in order to point to your Jahia instance :

--------------------
<jahia.test.url>http://localhost:8080/jahia/cms</jahia.test.url>
--------------------

 Then execute maven with the testJahia profile enabled :

--------------------
 mvn -P jahia-test install jahia:deploy
--------------------

 If you want to execute a single test, you can use the test system parameter with the class name of the test to
 execute. For example :

--------------------
 mvn -P jahia-test -o -Dtest=org.jahia.services.content.ContentTest jahia:test surefire-report:report-only
--------------------

 will execute one single test, ContentTest.

  If you want to execute all tests :

--------------------
 mvn -P jahia-test jahia:test
--------------------

 will execute one single test, ContentTest.

* Jmeter test

** Running tests

 You can execute JMeter tests on your running tomcat

 If your on windows this will run only under CYGWIN

 First you need to define where your jmeter is installed on your platform inside your settings.xml :

---------------------------
<jahia.test.jmeter.path>/usr/local/java/jakarta-jmeter-2.3.4</jahia.test.jmeter.path>
---------------------------

 And add database information :

---------------------------
<jahia.test.jmeter.dbip>localhost</jahia.test.jmeter.dbip>
<jahia.test.jmeter.dbname>jmeter</jahia.test.jmeter.dbname>
---------------------------

 Password and username of jahia database will be used (?)

 You also need to add some parameters for jmeter :

---------------------------
<jahia.test.jmeter.username>root</jahia.test.jmeter.username>
<jahia.test.jmeter.password>root1234</jahia.test.jmeter.password>
<jahia.test.jmeter.context>/jahia</jahia.test.jmeter.context>
<jahia.test.jmeter.loops>3</jahia.test.jmeter.loops>
<jahia.test.jmeter.threads>1</jahia.test.jmeter.threads>
---------------------------

 The maven script take care of copying all the files found inside src/main/scripts/jmeter to your jmeter installation
 under jmeter_path/bin/testPlan

 The groovy scripts expect to find the jmeter results inside jmeter_path/bin/results.

 The default behavior is to import the ACME site demo inside your jahia

 Ask jahia the sitemap of the site

 Copy the sitemap to jmeter_path/bin/testPlan/pageurls.txt

 And then start jmeter.

 To execute the jmeter test just run : mvn -P jmeterTest install

 A single  jmeter test can be executed by adding the -Dtest parameter to the command line, with the name of the jmeter  
 test folder.

** Developing a jmeter test

 Every JMeter has a folder in scripts/jmeter with one or more .jmx file and a test.properties file. The test.properties
 file allows you to add custom parameters to the execution of the jmeter. The whole content of test.properties will be
 added tho the jmeter command line.

* Execute tests in automated environment

 A profile startJahia is defined to help execution of tests automatically. This profile will configure jahia, start
 tomcat, execute test tasks, then stops jahia and delete it. This need to be combined with other profiles / tasks
 (testJahia, jmeterTest) .

